# Release v1.0-prod — MiniApp Base

**Data:** 2025-11-01 (BRT)

## Escopo principal
- Consolidação das versões de pré-lançamento v1.1 a v1.5 em um shell único preparado para MiniApps internos.
- Publicação do MiniApp "Pesquisas ▸ Cidades" como conteúdo interno acessível em `/?app=pesquisas-cidades`.
- Adequação completa para incorporação via GitHub Pages e widget HTML do Elementor.

## Destaques do shell
- Navegação responsiva (Início, MiniApps, Ajustes, Ajuda e Diagnóstico) com foco acessível por teclado.
- Tela inicial com grade de MiniApps configurados e fallback automático para destinos externos com restrições de iframe.
- Tela obrigatória "Sobre o MiniApp Base" com logotipos temáticos e metadados de versão atualizados via `public/meta/app-version.json`.
- Rodapé com ícone dinâmico por tema, indicação de estado de auto-salvamento (Desatualizado ▸ Salvando… ▸ Salvo) e link para 5 Horas.
- Diagnóstico de armazenamento exibindo persistência solicitada, quota e uso reportados por `navigator.storage`.

## Sincronização e armazenamento
- Preferências globais (tema, idioma, escala tipográfica) persistidas no IndexedDB compartilhado (`marco_core`) e propagadas via BroadcastChannel (`marco:prefs`).
- Canal `marco:store` replica estados de salvamento para o shell e MiniApps, garantindo feedback unificado.
- Estratégia de resiliência com `navigator.storage.persist()` / `persisted()` e leitura de quota via `navigator.storage.estimate()`.

## MiniApp Pesquisas ▸ Cidades
- Sincroniza tema, idioma e escala de fonte recebidos do shell.
- Persistência de campos no IndexedDB compartilhado com emissão de estados de salvamento.
- Interface responsiva com suporte a mensagens traduzidas e autosave monitorado no rodapé.

## Testes e QA
- Suíte Node Test Runner cobrindo BroadcastChannel, IndexedDB compartilhado e relatório de armazenamento.
- Roteiro manual para validar acessibilidade (navegação por teclado, alvos ≥ 44pt) e fallback de incorporação.
- Captura obrigatória de screenshots (Samsung Galaxy Tab S9 em retrato e paisagem) anexadas no PR da release.

## Próximos passos
- Publicar tag `v1.0-prod` e habilitar GitHub Pages apontando para esta versão.
- Seguir o checklist de [`docs/miniapp-interno.md`](../miniapp-interno.md) para novas MiniApps internas.
