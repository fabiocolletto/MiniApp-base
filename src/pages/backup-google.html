<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Backup Google – 5Horas</title>

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:wght@300;400;500&display=swap">

  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-900 text-slate-100 font-inter">

  <header class="fixed top-0 left-0 right-0 bg-slate-900/80 backdrop-blur border-b border-slate-700/40 flex items-center justify-between p-4">
    <a href="/miniapp/index.html" class="text-slate-200 flex items-center gap-2">
      <span class="material-symbols-rounded">arrow_back</span>
      Voltar
    </a>
    <h1 class="font-semibold">Backup Google</h1>
    <span class="w-8"></span>
  </header>

  <main class="p-4 pt-24 max-w-lg mx-auto space-y-6">

    <section class="rounded-2xl bg-slate-800/60 p-4 border border-slate-700/70">
      <h2 class="font-semibold mb-1 flex items-center gap-1">
        <span class="material-symbols-rounded text-green-400">cloud_sync</span>
        Sincronização com Google
      </h2>
      <p class="text-sm text-slate-300">Gerencie seu backup na sua conta Google.</p>

      <button id="btn-login" class="mt-4 w-full rounded-xl bg-blue-500 px-4 py-2 text-sm font-medium">Conectar com Google</button>

      <button id="btn-sync-upload" class="mt-2 w-full rounded-xl bg-emerald-500 px-4 py-2 text-sm font-medium">
        Sincronizar Agora
      </button>

      <button id="btn-sync-download" class="mt-2 w-full rounded-xl bg-yellow-500 px-4 py-2 text-sm font-medium text-slate-900">
        Baixar Backup
      </button>
    </section>

    <section class="rounded-2xl bg-slate-800/60 p-4 border border-slate-700/70">
      <h2 class="font-semibold mb-1 flex items-center gap-1">
        <span class="material-symbols-rounded text-indigo-300">devices</span>
        Multi-dispositivo
      </h2>

      <label class="flex items-center gap-3">
        <input type="checkbox" id="chk-multi" class="h-4 w-4">
        <span class="text-sm">Permitir acesso em múltiplos dispositivos</span>
      </label>
    </section>

    <section class="rounded-2xl bg-slate-800/60 p-4 border border-slate-700/70">
      <h2 class="font-semibold mb-1 flex items-center gap-1">
        <span class="material-symbols-rounded text-orange-300">offline_pin</span>
        Modo Offline
      </h2>

      <label class="flex items-center gap-3">
        <input type="checkbox" id="chk-offline" class="h-4 w-4">
        <span class="text-sm">Ativar modo offline neste dispositivo</span>
      </label>
    </section>

    <section class="rounded-2xl bg-slate-800/60 p-4 border border-slate-700/70">
      <h2 class="font-semibold mb-1">Status</h2>
      <pre id="status" class="text-xs text-slate-300 whitespace-pre-wrap"></pre>
    </section>

  </main>

  <script type="module">
    import { loginWithGoogle } from "../auth/google-auth.js";
    import { syncUpload, syncDownload } from "../sync/google-sync.js";

    const statusEl = document.getElementById("status");

    document.getElementById("btn-login").onclick = async () => {
      statusEl.textContent = "Conectando ao Google...";
      await loginWithGoogle();
      statusEl.textContent = "Conectado.";
    };

    document.getElementById("btn-sync-upload").onclick = async () => {
      statusEl.textContent = "Enviando backup...";
      const r = await syncUpload("Base", "backup.json");
      statusEl.textContent = JSON.stringify(r, null, 2);
    };

    document.getElementById("btn-sync-download").onclick = async () => {
      statusEl.textContent = "Baixando backup...";
      const r = await syncDownload("Base", "backup.json");
      statusEl.textContent = r
        ? "Backup restaurado com sucesso."
        : "Nenhum backup encontrado.";
    };
  </script>

</body>
</html>
