<!doctype html>
<html lang="pt-BR" data-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title data-i18n="pageTitle">Gerador de Roteiros para TTS</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
  <link rel="stylesheet" href="../miniapp-base/style/styles.css">
</head>
<body class="app-blank">
  <main class="app-board" aria-labelledby="ttsTitle">
    <header class="app-board__header">
      <div class="app-board__intro">
        <div class="app-board__title-row">
          <span class="app-icon app-icon--theme-tts" aria-hidden="true">
            <span class="material-symbols-rounded">text_to_speech</span>
          </span>
          <div>
            <h1 id="ttsTitle" data-i18n="app.title">Gerador de Roteiros para TTS</h1>
            <p class="app-board__subtitle" data-i18n="app.subtitle">
              Combine dados essenciais para gerar um roteiro consistente de locução.
            </p>
          </div>
        </div>
      </div>
      <div class="miniapp-toolbar">
        <button
          type="button"
          class="btn ghost miniapp-toolbar__button"
          data-js="open-catalog"
        >
          <span class="material-symbols-rounded" aria-hidden="true">apps</span>
          <span data-js="catalog-label" data-i18n="actions.openCatalog">Catálogo</span>
        </button>
      </div>
    </header>

    <section class="card form-card">
      <form id="scriptForm" class="form-card__form">
        <fieldset class="form-fieldset">
          <legend data-i18n="form.legend">Informações essenciais</legend>
          <p class="form-card__description" data-i18n="form.description">
            Preencha os campos abaixo para montar um roteiro automaticamente.
          </p>
          <div class="form-grid form-grid--split">
            <div class="form-field">
              <label class="form-field__label" for="cityInput" data-i18n="fields.city.label">Cidade</label>
              <input
                type="text"
                id="cityInput"
                name="city"
                class="form-field__control"
                required
                data-i18n-placeholder="fields.city.placeholder"
              >
            </div>
            <div class="form-field">
              <label class="form-field__label" for="audienceInput" data-i18n="fields.audience.label">Público</label>
              <input
                type="text"
                id="audienceInput"
                name="audience"
                class="form-field__control"
                required
                data-i18n-placeholder="fields.audience.placeholder"
              >
            </div>
            <div class="form-field form-field--full">
              <label class="form-field__label" for="highlightInput" data-i18n="fields.highlight.label">Destaque</label>
              <textarea
                id="highlightInput"
                name="highlight"
                class="form-field__control form-field__control--textarea"
                rows="3"
                required
                data-i18n-placeholder="fields.highlight.placeholder"
              ></textarea>
            </div>
            <div class="form-field form-field--full">
              <label class="form-field__label" for="ctaInput" data-i18n="fields.cta.label">Chamada à ação</label>
              <textarea
                id="ctaInput"
                name="cta"
                class="form-field__control form-field__control--textarea"
                rows="3"
                required
                data-i18n-placeholder="fields.cta.placeholder"
              ></textarea>
            </div>
          </div>
          <div class="form-actions">
            <button type="submit" id="generateButton" class="btn primary" data-i18n="actions.generate">Gerar roteiro</button>
          </div>
        </fieldset>
      </form>
    </section>

    <section class="card stack">
      <div class="stack stack--gap-xs">
        <h2 data-i18n="output.label">Roteiro gerado</h2>
        <p id="outputStatus" class="status-message" aria-live="polite" data-i18n="output.helper">
          Preencha o formulário para gerar um roteiro automático.
        </p>
      </div>
      <textarea
        id="scriptOutput"
        name="script"
        class="form-field__control form-field__control--textarea"
        rows="10"
        readonly
        data-i18n-placeholder="output.placeholder"
      ></textarea>
      <div class="form-actions">
        <button type="button" id="editButton" class="btn ghost" data-i18n="actions.edit" disabled>Editar manualmente</button>
      </div>
    </section>

    <section class="card stack">
      <div class="stack stack--gap-xs">
        <h2 id="audioTitle" data-i18n="audio.title">Prévia de áudio</h2>
        <p id="audioDescription" class="status-message" data-i18n="audio.description">
          Personalize os ajustes antes de gerar a prévia simplificada e o download.
        </p>
      </div>
      <div class="control-grid">
        <div class="control-card">
          <div class="control-card__header">
            <label for="audioSpeed" data-audio-label="speed" data-i18n="audio.controls.speed.label">Velocidade</label>
            <span class="control-card__value" data-audio-value="speed">1,00×</span>
          </div>
          <input
            type="range"
            id="audioSpeed"
            class="slider"
            min="0.5"
            max="1.5"
            step="0.05"
            value="1"
            aria-describedby="audioSpeedHelper"
            data-audio-input="speed"
            data-i18n-title="audio.controls.speed.tooltip"
          >
          <p id="audioSpeedHelper" class="control-card__helper" data-audio-helper="speed" data-i18n="audio.controls.speed.helper">
            Controla a rapidez da locução gerada.
          </p>
        </div>
        <div class="control-card">
          <div class="control-card__header">
            <label for="audioVolume" data-audio-label="volume" data-i18n="audio.controls.volume.label">Volume</label>
            <span class="control-card__value" data-audio-value="volume">100%</span>
          </div>
          <input
            type="range"
            id="audioVolume"
            class="slider"
            min="0"
            max="1"
            step="0.05"
            value="1"
            aria-describedby="audioVolumeHelper"
            data-audio-input="volume"
            data-i18n-title="audio.controls.volume.tooltip"
          >
          <p id="audioVolumeHelper" class="control-card__helper" data-audio-helper="volume" data-i18n="audio.controls.volume.helper">
            Equilibra o volume aplicado à prévia e ao download.
          </p>
        </div>
        <div class="control-card">
          <div class="control-card__header">
            <label for="audioPause" data-audio-label="pause" data-i18n="audio.controls.pause.label">Pausa entre blocos</label>
            <span class="control-card__value" data-audio-value="pause">0,6 s</span>
          </div>
          <input
            type="range"
            id="audioPause"
            class="slider"
            min="0"
            max="3"
            step="0.1"
            value="0.6"
            aria-describedby="audioPauseHelper"
            data-audio-input="pause"
            data-i18n-title="audio.controls.pause.tooltip"
          >
          <p id="audioPauseHelper" class="control-card__helper" data-audio-helper="pause" data-i18n="audio.controls.pause.helper">
            Controla o silêncio entre os parágrafos do roteiro.
          </p>
        </div>
      </div>
      <div class="form-actions">
        <button type="button" id="audioGenerateButton" class="btn primary" data-i18n="audio.actions.preview" disabled>Gerar prévia de áudio</button>
        <button type="button" id="audioDownloadButton" class="btn ghost" data-i18n="audio.actions.download" disabled>Baixar áudio (WAV)</button>
      </div>
      <div class="stack stack--gap-xs">
        <p id="audioStatus" class="status-message" data-i18n="audio.status.empty">Gere um roteiro para habilitar a prévia de áudio.</p>
        <audio id="audioPlayer" class="audio-player" controls preload="none"></audio>
      </div>
    </section>

    <section class="card stack">
      <div class="stack stack--gap-xs">
        <h2 id="historyTitle" data-i18n="history.title">Histórico</h2>
        <p id="historyDescription" class="status-message" data-i18n="history.description">
          Consulte os áudios já gerados para ouvir novamente ou baixar.
        </p>
      </div>
      <div class="form-actions">
        <button type="button" id="historyClearButton" class="btn ghost" data-i18n="history.actions.clear" disabled>Limpar histórico</button>
      </div>
      <ul id="historyList" class="history-list" aria-live="polite"></ul>
      <p id="historyEmptyState" class="status-message" data-i18n="history.empty">Nenhum áudio gerado ainda.</p>
    </section>
  </main>

  <script src="../miniapp-base/js/atoms/messaging.js"></script>
  <script src="../miniapp-base/js/molecules/shell-sync.js"></script>
  <script src="../miniapp-base/js/organisms/miniapp-tts.js"></script>
</body>
</html>
