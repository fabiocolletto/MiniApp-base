<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MiniApps offline</title>
    <link rel="stylesheet" href="./app-theme.css" />
    <link rel="stylesheet" href="../styles/auth.css" />
  </head>
  <body class="auth-only">
    <header class="auth-shell__header" aria-label="Aplicativo indisponível offline">
      <button type="button" class="auth-shell__menu-button" aria-label="Abrir menu principal">
        <span class="sr-only">Abrir menu</span>
        <span class="auth-shell__menu-icon" aria-hidden="true">
          <span></span>
          <span></span>
          <span></span>
        </span>
      </button>
    </header>

    <main class="auth-screen">
      <section class="auth-card" role="status" aria-live="polite">
        <header class="auth-header">
          <h1>Sem conexão</h1>
          <p class="auth-sub">Não foi possível carregar o conteúdo porque você está offline.</p>
        </header>
        <div class="auth-card__body">
          <div class="guest-panel" role="presentation">
            <p class="guest-panel__intro">
              Assim que a conexão for restabelecida, volte a esta página para acessar os MiniApps.
            </p>
            <p class="guest-panel__note">
              Caso o problema persista, verifique o acesso à internet ou tente novamente mais tarde.
            </p>
          </div>
        </div>
      </section>
    </main>

    <footer class="auth-shell__footer">
      <nav class="auth-shell__footer-nav" aria-label="Menu principal">
        <button
          type="button"
          class="auth-shell__menu-button"
          aria-label="Abrir menu principal"
          aria-haspopup="true"
          aria-expanded="false"
          disabled
          aria-disabled="true"
        >
          <span class="auth-shell__menu-icon" aria-hidden="true">
            <span></span>
            <span></span>
            <span></span>
          </span>
          <span class="sr-only">Menu indisponível offline</span>
        </button>
      </nav>

      <button
        type="button"
        class="auth-shell__footer-toggle"
        data-footer-toggle
        aria-controls="authShellFooterExtra"
        aria-expanded="false"
        aria-label="Mostrar detalhes do rodapé"
      >
        <svg
          class="auth-shell__footer-toggle-icon"
          viewBox="0 0 20 20"
          role="presentation"
          aria-hidden="true"
        >
          <path
            d="M5 8.25L10 12.75L15 8.25"
            fill="none"
            stroke="currentColor"
            stroke-width="1.75"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>

      <small class="auth-shell__footer-text">
        <picture
          class="auth-shell__footer-logo"
          aria-hidden="true"
        >
          <source
            srcset="https://5horas.com.br/wp-content/uploads/2025/10/Icone-Dark-Transparente-500x500px.webp"
            media="(prefers-color-scheme: dark)"
          />
          <img
            src="https://5horas.com.br/wp-content/uploads/2025/10/Icone-Light-Transparente-500x500px.webp"
            width="40"
            height="40"
            alt=""
            loading="lazy"
            decoding="async"
          />
        </picture>
        <span>5 Horas • MiniApps</span>
        <span data-footer-extra id="authShellFooterExtra">
          <span class="auth-shell__footer-divider" aria-hidden="true">•</span>
          <span>Offline</span>
        </span>
      </small>
    </footer>

    <script>
      (() => {
        const footer = document.querySelector('.auth-shell__footer');
        const toggle = document.querySelector('[data-footer-toggle]');
        const root = document.body;
        const labels = {
          expand: 'Mostrar detalhes do rodapé',
          collapse: 'Ocultar detalhes do rodapé',
        };

        const mediaQuery = typeof window.matchMedia === 'function' ? window.matchMedia('(max-width: 48rem)') : null;

        function updateFooterOffset() {
          if (!footer || !root) {
            return;
          }

          const isMobile = Boolean(mediaQuery?.matches);
          const footerHeight = isMobile ? Math.ceil(footer.getBoundingClientRect().height) : 0;

          if (footerHeight > 0) {
            root.style.setProperty('--layout-footer-offset', `${footerHeight}px`);
          } else {
            root.style.removeProperty('--layout-footer-offset');
          }
        }

        function setExpanded(state) {
          const expanded = Boolean(state);

          if (footer) {
            if (expanded) {
              footer.setAttribute('data-footer-expanded', 'true');
            } else {
              footer.removeAttribute('data-footer-expanded');
            }
          }

          if (toggle) {
            toggle.setAttribute('aria-expanded', expanded ? 'true' : 'false');
            toggle.setAttribute('aria-label', expanded ? labels.collapse : labels.expand);
          }

          updateFooterOffset();
        }

        function collapse() {
          setExpanded(false);
        }

        function syncViewport() {
          const isMobile = Boolean(mediaQuery?.matches);
          if (toggle) {
            toggle.hidden = !isMobile;
          }
          if (!isMobile) {
            collapse();
          }

          updateFooterOffset();
        }

        if (toggle) {
          toggle.addEventListener('click', () => {
            const expanded = footer?.getAttribute('data-footer-expanded') === 'true';
            setExpanded(!expanded);
          });

          toggle.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && footer?.getAttribute('data-footer-expanded') === 'true') {
              event.preventDefault();
              collapse();
            }
          });
        }

        if (mediaQuery) {
          const handleChange = () => syncViewport();
          if (typeof mediaQuery.addEventListener === 'function') {
            mediaQuery.addEventListener('change', handleChange);
          } else if (typeof mediaQuery.addListener === 'function') {
            mediaQuery.addListener(handleChange);
          }
          syncViewport();
        } else if (toggle) {
          toggle.hidden = true;
        }

        if (footer && 'ResizeObserver' in window) {
          const resizeObserver = new ResizeObserver(() => updateFooterOffset());
          resizeObserver.observe(footer);
        }

        collapse();
        updateFooterOffset();
      })();
    </script>
  </body>
</html>
