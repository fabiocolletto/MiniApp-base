<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Educação — Agenda do Aluno</title>

  <!-- Google Fonts / Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,400..700,0..1,-50..200" rel="stylesheet" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Tokens de tema (mesmo padrão) + ACCENT ORANGE (Identidade Agenda) -->
  <style>
    :root {
      color-scheme: light dark;
      --page-bg: 0 0 0;
      --page-bg-alpha: .92;
      --page-fg: 248 250 252;
      --page-fg-muted: 226 232 240;
      --page-border: 255 255 255;
      --disabled-opacity: .72;

      /* Accent orange (dark) */
      --accent: 249 115 22;        /* orange-500 */
      --accent-weak: 249 115 22 / 0.12;
      --accent-border: 249 115 22 / 0.45;
      --accent-text: 255 251 235;  /* orange-50 */
      
      --input-bg: 255 255 255 / 0.05; 
    }
    html[data-theme="light"] {
      --page-bg: 248 250 252;
      --page-bg-alpha: .96;
      --page-fg: 15 23 42;
      --page-fg-muted: 51 65 85;
      --page-border: 15 23 42;
      --disabled-opacity: .85;

      /* Accent orange (light) */
      --accent: 194 65 12;         /* orange-600 */
      --accent-weak: 194 65 12 / 0.10;
      --accent-border: 194 65 12 / 0.40;
      --accent-text: 124 45 18;    /* orange-900 */
      
      --input-bg: 15 23 42 / 0.03; 
    }

    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    
    /* ===================================== */
    /* ESTILOS DE PADRONIZAÇÃO (Header e Componentes) */
    /* ===================================== */
    .header-btn-standard {
        @apply inline-flex items-center gap-2 rounded-full border px-3 py-2 text-sm font-semibold whitespace-nowrap transition;
        @apply border-[rgb(var(--page-border)/0.12)] bg-transparent hover:bg-[rgb(var(--page-border)/0.06)];
    }
    .btn-icon-sm {
        @apply p-2 rounded-lg bg-transparent border border-transparent hover:bg-[rgb(var(--page-border)/0.08)] transition-colors duration-150;
    }
    .btn-primary {
      @apply w-full px-4 py-3 rounded-xl font-semibold text-[rgb(var(--accent-text))] bg-[rgb(var(--accent))] hover:bg-[rgb(var(--accent)/0.9)] transition-colors duration-200;
    }
    .section-card {
      @apply bg-transparent border border-[rgb(var(--page-border)/0.25)] rounded-2xl shadow-none p-6 sm:p-8;
    }
    .input-base {
      @apply w-full p-3 rounded-xl border border-[rgb(var(--page-border)/0.2)] focus:ring-2 focus:ring-[rgb(var(--accent))] focus:border-[rgb(var(--accent)/0.5)] transition-colors duration-200;
      background-color: rgb(var(--input-bg));
    }
    .event-item {
        @apply flex items-start p-4 rounded-xl border border-[rgb(var(--page-border)/0.15)] hover:border-[rgb(var(--accent-border))] hover:bg-[rgb(var(--accent-weak))] transition-all duration-200;
    }
  </style>
</head>
<body class="min-h-screen antialiased relative text-[rgb(var(--page-fg))] bg-[rgb(var(--page-bg)/var(--page-bg-alpha))] transition-colors">

  <div data-global-header></div>

  <script type="module">
    import { loadGlobalHeader } from '/src/core/header/loader.js';

    loadGlobalHeader();
  </script>

  <main class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6 pt-20">

    <!-- HERO centralizado, com destaque em Laranja -->
    <header class="mt-8 mb-12 text-center">
      <h1 class="text-3xl sm:text-4xl font-bold tracking-tight text-[rgb(var(--accent))]">Agenda Escolar</h1>
      <p class="mt-2 text-sm sm:text-base text-[rgb(var(--page-fg-muted))]">Seu calendário de eventos, provas e prazos importantes.</p>
    </header>

    <!-- Estrutura Principal: Calendário (Topo) e Eventos (Baixo) -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

        <!-- Coluna 1: Calendário Visual (Visão Mensal/Semanal) -->
        <section class="lg:col-span-2 section-card p-4 sm:p-6">
            <h2 class="text-xl font-semibold mb-4 flex items-center gap-2">
                <span class="material-symbols-rounded text-[rgb(var(--accent))]">calendar_month</span>
                Calendário Completo
            </h2>
            
            <!-- CONTROLES DO CALENDÁRIO -->
            <div class="flex justify-between items-center mb-4">
                <button class="text-[rgb(var(--page-fg-muted))] hover:text-[rgb(var(--accent))] p-2 rounded-lg transition" title="Mês Anterior">
                    <span class="material-symbols-rounded">arrow_back_ios</span>
                </button>
                <h3 id="current-month-display" class="font-bold text-lg">Novembro 2025</h3>
                <button class="text-[rgb(var(--page-fg-muted))] hover:text-[rgb(var(--accent))] p-2 rounded-lg transition" title="Próximo Mês">
                    <span class="material-symbols-rounded">arrow_forward_ios</span>
                </button>
            </div>

            <!-- GRID DO CALENDÁRIO (Simulação de um mês) -->
            <div id="calendar-grid" class="grid grid-cols-7 text-center text-sm">
                <!-- Dias da Semana -->
                <div class="font-semibold text-[rgb(var(--accent))] py-2">Dom</div>
                <div class="font-semibold text-[rgb(var(--accent))] py-2">Seg</div>
                <div class="font-semibold text-[rgb(var(--accent))] py-2">Ter</div>
                <div class="font-semibold text-[rgb(var(--accent))] py-2">Qua</div>
                <div class="font-semibold text-[rgb(var(--accent))] py-2">Qui</div>
                <div class="font-semibold text-[rgb(var(--accent))] py-2">Sex</div>
                <div class="font-semibold text-[rgb(var(--accent))] py-2">Sáb</div>

                <!-- Simulação dos Dias (1 a 30) -->
                <!-- Placeholder para dias antes do 1º (opacidade) -->
                <div class="text-[rgb(var(--page-fg-muted))] opacity-40 py-2">29</div> 
                <div class="text-[rgb(var(--page-fg-muted))] opacity-40 py-2">30</div>
                
                <!-- Dias do Mês (1 ao 30/31) -->
                <div class="calendar-day py-2">1</div>
                <div class="calendar-day py-2">2</div>
                <div class="calendar-day py-2">3</div>
                <div class="calendar-day py-2">4</div>
                <div class="calendar-day py-2">5</div>
                <div class="calendar-day py-2">6</div>
                <div class="calendar-day py-2">7</div>
                <div class="calendar-day py-2">8</div>
                <div class="calendar-day py-2">9</div>
                
                <!-- Dia com Evento - Prova (Destaque Amarelo) -->
                <div class="calendar-day relative py-2 bg-amber-500/10 rounded-full border border-amber-500/40 cursor-pointer hover:scale-105 transition" title="Prova de Matemática">
                    10
                    <span class="absolute bottom-0 left-1/2 -translate-x-1/2 h-1 w-1 bg-amber-500 rounded-full"></span>
                </div>
                
                <div class="calendar-day py-2">11</div>
                <div class="calendar-day py-2">12</div>
                <div class="calendar-day py-2">13</div>
                <div class="calendar-day py-2">14</div>
                
                <!-- Dia com Evento - Tarefa (Destaque Vermelho) -->
                <div class="calendar-day relative py-2 bg-red-500/10 rounded-full border border-red-500/40 cursor-pointer hover:scale-105 transition" title="Prazo Tarefa de Casa">
                    15
                    <span class="absolute bottom-0 left-1/2 -translate-x-1/2 h-1 w-1 bg-red-500 rounded-full"></span>
                </div>
                
                <div class="calendar-day py-2">16</div>
                
                <!-- Dia com Múltiplos Eventos (Destaque Azul - Evento Escolar) -->
                <div class="calendar-day relative py-2 bg-sky-500/10 rounded-full border border-sky-500/40 cursor-pointer hover:scale-105 transition" title="Feira de Ciências">
                    17
                    <span class="absolute bottom-0 left-1/2 -translate-x-1/2 h-1 w-1 bg-sky-500 rounded-full"></span>
                </div>
                
                <!-- Dia Atual (Destaque Principal Laranja) -->
                <div class="calendar-day relative py-2 font-bold bg-[rgb(var(--accent))] text-[rgb(var(--accent-text))] rounded-full cursor-pointer shadow-lg hover:scale-105 transition">
                    18 <!-- Hoje -->
                </div>
                
                <div class="calendar-day py-2">19</div>
                <div class="calendar-day py-2">20</div>
                <div class="calendar-day py-2">21</div>
                <div class="calendar-day py-2">22</div>
                <div class="calendar-day py-2">23</div>
                <div class="calendar-day py-2">24</div>
                <div class="calendar-day py-2">25</div>
                <div class="calendar-day py-2">26</div>
                <div class="calendar-day py-2">27</div>
                <div class="calendar-day py-2">28</div>
                <div class="calendar-day py-2">29</div>
                <div class="calendar-day py-2">30</div>
                <!-- Placeholder para dias depois do 30 (opacidade) -->
                <div class="text-[rgb(var(--page-fg-muted))] opacity-40 py-2">1</div> 
                <div class="text-[rgb(var(--page-fg-muted))] opacity-40 py-2">2</div>
            </div>
        </section>

        <!-- Coluna 2: Lista de Próximos Eventos (Timeline) -->
        <section class="lg:col-span-1 section-card p-4 sm:p-6">
            <h2 class="text-xl font-semibold mb-6 flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <span class="material-symbols-rounded text-[rgb(var(--accent))]">list_alt</span>
                    Próximos 7 Dias
                </div>
                <!-- Botão Adicionar Evento (mobile/compacto) -->
                <button class="btn-icon-sm sm:hidden bg-[rgb(var(--accent)/0.10)] text-[rgb(var(--accent))]" 
                        onclick="toggleModal(true)" title="Adicionar Novo Evento">
                    <span class="material-symbols-rounded">add</span>
                </button>
            </h2>

            <div class="space-y-4">
                
                <!-- Evento 1: Prova (Foco Acadêmico - Violeta) -->
                <div class="event-item border-violet-600/20 bg-violet-500/10">
                    <span class="material-symbols-rounded text-2xl text-violet-500 mr-3 mt-1">quiz</span>
                    <div>
                        <p class="font-semibold text-violet-200">Prova de Química Orgânica</p>
                        <p class="text-xs text-[rgb(var(--page-fg-muted))]">Terça-feira, 20 de Novembro, 10:00</p>
                        <p class="text-sm mt-1">Local: Sala 3B</p>
                    </div>
                </div>
                
                <!-- Evento 2: Tarefa (Foco Prazo - Âmbar/Laranja) -->
                <div class="event-item border-amber-600/20 bg-amber-500/10">
                    <span class="material-symbols-rounded text-2xl text-amber-500 mr-3 mt-1">home_work</span>
                    <div>
                        <p class="font-semibold text-amber-200">Entrega de Relatório de História</p>
                        <p class="text-xs text-[rgb(var(--page-fg-muted))]">Quarta-feira, 21 de Novembro, 23:59</p>
                        <p class="text-sm mt-1">Status: Pendente</p>
                    </div>
                </div>

                <!-- Evento 3: Evento Escolar (Foco Comunicação - Céu) -->
                <div class="event-item border-sky-600/20 bg-sky-500/10">
                    <span class="material-symbols-rounded text-2xl text-sky-500 mr-3 mt-1">campaign</span>
                    <div>
                        <p class="font-semibold text-sky-200">Palestra: Orientação Profissional</p>
                        <p class="text-xs text-[rgb(var(--page-fg-muted))]">Sexta-feira, 23 de Novembro, 14:30</p>
                        <p class="text-sm mt-1">Tipo: Evento Obrigatório</p>
                    </div>
                </div>

                <!-- Evento 4: Pessoal (Foco Pessoal - Esmeralda) -->
                <div class="event-item border-emerald-600/20 bg-emerald-500/10">
                    <span class="material-symbols-rounded text-2xl text-emerald-500 mr-3 mt-1">person</span>
                    <div>
                        <p class="font-semibold text-emerald-200">Revisão Tópicos (Matemática)</p>
                        <p class="text-xs text-[rgb(var(--page-fg-muted))]">Sábado, 24 de Novembro, 09:00</p>
                        <p class="text-sm mt-1">Lembrete Pessoal</p>
                    </div>
                </div>
            </div>
        </section>

    </div>

  </main>
  
  <!-- MODAL para Adicionar Novo Evento Pessoal -->
  <div id="new-event-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/70 backdrop-blur-sm transition-opacity duration-300" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    
    <!-- Conteúdo principal do modal -->
    <div class="max-w-sm w-full mx-4 transform transition-transform duration-300 ease-out border border-[rgb(var(--page-border)/0.25)] rounded-2xl shadow-2xl p-6 sm:p-8"
         style="background-color: rgb(var(--page-bg));" onclick="event.stopPropagation();">
      
      <!-- Cabeçalho do Modal -->
      <div class="flex justify-between items-center mb-6">
        <h2 id="modal-title" class="text-2xl font-semibold flex items-center gap-2">
          <span class="material-symbols-rounded text-[rgb(var(--accent))]">add_circle</span>
          Adicionar Evento Pessoal
        </h2>
        <!-- Botão de Fechar -->
        <button onclick="toggleModal(false)" class="p-2 rounded-lg text-[rgb(var(--page-fg-muted))] hover:bg-[rgb(var(--page-border)/0.08)] transition" aria-label="Fechar">
          <span class="material-symbols-rounded">close</span>
        </button>
      </div>

      <!-- Formulário de Evento -->
      <form class="space-y-5">
        
        <!-- Título -->
        <div>
          <label for="event_title" class="block text-sm font-medium mb-1 text-[rgb(var(--page-fg-muted))]">Título/Descrição</label>
          <input type="text" id="event_title" placeholder="Revisar Capítulo 5" class="input-base" required />
        </div>

        <!-- Tipo (Opcional) -->
        <div>
          <label for="event_type" class="block text-sm font-medium mb-1 text-[rgb(var(--page-fg-muted))]">Tipo de Lembrete</label>
          <select id="event_type" class="input-base appearance-none bg-right pr-10">
            <option>Lembrete Pessoal</option>
            <option>Revisão de Conteúdo</option>
            <option>Compromisso Importante</option>
          </select>
        </div>

        <!-- Data e Hora -->
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label for="event_date" class="block text-sm font-medium mb-1 text-[rgb(var(--page-fg-muted))]">Data</label>
            <input type="date" id="event_date" class="input-base" required />
          </div>
          <div>
            <label for="event_time" class="block text-sm font-medium mb-1 text-[rgb(var(--page-fg-muted))]">Hora</label>
            <input type="time" id="event_time" class="input-base" />
          </div>
        </div>

        <!-- Botão Salvar -->
        <div class="pt-2">
          <button type="submit" id="save-event-btn" class="btn-primary">
             <span class="material-symbols-rounded text-lg align-middle mr-1">save</span>
             SALVAR EVENTO
          </button>
        </div>
      </form>
    </div>
  </div>


  <!-- Toast de tema (mantido) -->
  <div id="theme-toast" class="fixed bottom-4 right-4 z-[60] pointer-events-none select-none opacity-0 translate-y-2 transition-all duration-300" role="status" aria-live="polite">
    <div class="flex items-center gap-2 rounded-full border border-[rgb(var(--page-border)/0.18)] bg-[rgb(var(--page-bg)/0.9)] px-3 py-1.5 text-xs font-semibold shadow-lg">
      <span id="theme-toast-icon" class="material-symbols-rounded text-base">dark_mode</span>
      <span id="theme-toast-label">Tema escuro</span>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        // ============================
        // Lógica de Tema
        // ============================
        const html = document.documentElement;
        const toggleBtn = document.querySelector('[data-theme-toggle]');
        const icon = document.querySelector('[data-theme-icon]');
        const srLabel = document.querySelector('[data-theme-label]');
        const toast = document.getElementById('theme-toast');
        const toastIcon = document.getElementById('theme-toast-icon');
        const toastLabel = document.getElementById('theme-toast-label');
        let toastTimer = null;

        if (!toggleBtn) return;

        function showToast(theme) {
            if (!toast) return;
            const isDark = theme === 'dark';
            toastIcon.textContent = isDark ? 'dark_mode' : 'light_mode';
            toastLabel.textContent = isDark ? 'Tema escuro' : 'Tema claro';
            toast.classList.remove('opacity-0', 'translate-y-2');
            toast.classList.add('opacity-100', 'translate-y-0');
            if (toastTimer) clearTimeout(toastTimer);
            toastTimer = setTimeout(() => {
                toast.classList.add('opacity-0', 'translate-y-2');
                toast.classList.remove('opacity-100', 'translate-y-0');
            }, 1800);
        }

        function apply(theme, opts = { silent: false }) {
            html.setAttribute('data-theme', theme);
            const isDark = theme === 'dark';
            icon.textContent = isDark ? 'light_mode' : 'dark_mode';
            srLabel.textContent = isDark ? 'Usar tema claro' : 'Usar tema escuro';
            if (!opts.silent) showToast(theme);
        }

        function getInitialTheme() {
            const saved = localStorage.getItem('theme');
            if (saved === 'light' || saved === 'dark') return saved;
            return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        let theme = getInitialTheme();
        apply(theme, { silent: true });
        toggleBtn.addEventListener('click', () => {
            theme = theme === 'dark' ? 'light' : 'dark';
            localStorage.setItem('theme', theme);
            apply(theme);
        });

        // ============================
        // Lógica de Modal (Adicionar Evento)
        // ============================
        const modal = document.getElementById('new-event-modal');
        const saveEventBtn = document.getElementById('save-event-btn');

        function toggleModal(show) {
            if (show) {
                modal.classList.remove('hidden');
                setTimeout(() => {
                    modal.style.opacity = '1';
                    modal.querySelector('div:first-child').style.transform = 'translateY(0)';
                }, 10);
            } else {
                modal.style.opacity = '0';
                modal.querySelector('div:first-child').style.transform = 'translateY(20px)';
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }
        }
        window.toggleModal = toggleModal;

        // Fechar o modal ao clicar no overlay
        modal.addEventListener('click', (e) => {
            if (e.target.id === 'new-event-modal') {
                toggleModal(false);
            }
        });
        
        // Lógica de Placeholder para Salvar Evento
        modal.querySelector('form').addEventListener('submit', function(event) {
            event.preventDefault();
            console.log("Evento pessoal salvo com sucesso!");
            
            saveEventBtn.textContent = 'Salvando...';
            saveEventBtn.classList.add('opacity-70');
            
            setTimeout(() => {
                saveEventBtn.textContent = 'SALVAR EVENTO';
                saveEventBtn.classList.remove('opacity-70');
                toggleModal(false); 
            }, 1000);
        });
        
        // ============================
        // Lógica de Calendário (Placeholder)
        // ============================
        // Simulação de marcação de dia atual
        const today = new Date().getDate();
        const calendarDays = document.querySelectorAll('.calendar-day');
        
        calendarDays.forEach(day => {
            if (parseInt(day.textContent.trim()) === today && day.classList.contains('font-bold')) {
                // A classe 'shadow-lg' e 'border-[3px]' foi removida do HTML para simplificar,
                // mas a lógica de hoje deve ser mantida.
                // A cor de destaque principal já está definida via Tailwind/CSS no HTML (bg-[rgb(var(--accent))])
                day.classList.add('shadow-lg', 'border-[3px]', 'border-white/50'); 
            }
        });
    });
  </script>
</body>
  </html>
