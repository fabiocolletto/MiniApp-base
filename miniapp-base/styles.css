:root{
  /* ===== Identidade & Tokens de cor ===== */
  /* Marca 5 Horas */
  --brand-primary:#ff7a00; /* cor principal */
  --brand-primary-ink:#8a3d00;
  --brand-secondary:#0b57d0; /* azul títulos */
  --brand-accent:#16a34a;    /* verde sucesso */
  --brand-danger:#dc2626;    /* vermelho erro */
  --brand-warn:#f59e0b;      /* amarelo aviso */
  --brand-info:#0284c7;      /* azul info */

  /* Superfícies (modo claro) */
  --bg:#f7f9fb;
  --surface:#ffffff;
  --surface-alt:#f1f5f9;
  --border:#e2e8f0;

  /* Tipografia (modo claro) */
  --text:#0f172a;
  --muted:#64748b;
  --muted-ink:#475569;

  /* Efeitos */
  --radius:14px;
  --radius-sm:10px;
  --radius-pill:1000px;
  --shadow-sm:0 1px 2px rgba(15,23,42,.04),0 1px 1px rgba(15,23,42,.04);
  --shadow-md:0 6px 16px rgba(2,6,23,.06);
  --ring:0 0 0 3px color-mix(in oklab, var(--brand-primary) 28%, transparent);

  /* Espaçamento e grid */
  --pad:14px;
  --gap:18px;
  --container:clamp(960px, 90vw, 1280px);

  /* Tipografia */
  --font-ui: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", sans-serif;
  --font-size:14px;
  --h1:clamp(20px, 2.4vw, 28px);
  --h3:15px;

  /* Ícones (Material Symbols varfont) */
  --icon-size:20px;
  --icon-wght:400;
  --icon-fill:0;
  --icon-grad:0;
  --icon-opsz:24;
}

/* ===== Dark theme ===== */
[data-theme="dark"]{
  --bg:#0b1220;
  --surface:#0f172a;
  --surface-alt:#111a2d;
  --border:#1f2a44;
  --text:#e5efff;
  --muted:#8aa0bd;
  --muted-ink:#b7c4d8;
  --shadow-sm:none; --shadow-md:none;
}

/* ===== Reset mínimo ===== */
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:400 var(--font-size)/1.45 var(--font-ui)}
img{max-width:100%;display:block}
a{color:inherit;text-decoration:none}

.material-symbols-rounded{font-family:"Material Symbols Rounded";font-weight:normal;font-style:normal;font-size:var(--icon-size);display:inline-flex;vertical-align:middle;line-height:1;user-select:none;letter-spacing:normal;text-transform:none;white-space:nowrap;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased;font-variation-settings:"FILL" var(--icon-fill),"wght" var(--icon-wght),"GRAD" var(--icon-grad),"opsz" var(--icon-opsz)}

/* ===== Layout ===== */
header{max-width:var(--container);margin:0 auto;padding:22px var(--pad) 8px}
.title{display:flex;gap:12px;align-items:flex-start}
.title>.material-symbols-rounded{font-size:28px;color:var(--brand-secondary)}
.title h1{margin:0;color:var(--brand-secondary);font-size:var(--h1);letter-spacing:.2px}
.subtitle{margin:2px 0 0;color:var(--muted)}
.version{margin-left:auto;align-self:flex-start;color:var(--muted);font-size:12px;background:var(--surface-alt);border:1px solid var(--border);padding:3px 8px;border-radius:999px}

.toolbar{max-width:var(--container);margin:10px auto 12px;padding:0 var(--pad)}
.split{display:flex;flex-wrap:wrap;gap:10px}

/* Botões pill */
.btn,.chipbtn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:var(--radius-pill);border:1px solid var(--border);background:var(--surface);box-shadow:var(--shadow-sm)}
.btn:hover,.chipbtn:hover{box-shadow:var(--shadow-md)}
.btn:focus-visible{outline:none;box-shadow:var(--ring)}
.btn .material-symbols-rounded{font-size:18px;color:var(--muted-ink)}

/* Indicador de status do sync (bolinha) */
.status-dot{width:8px;height:8px;margin-left:6px;border-radius:50%;background:var(--muted)}
.status-dot.ok{background:var(--brand-accent)}
.status-dot.warn{background:var(--brand-warn)}
.status-dot.err{background:var(--brand-danger)}

/* KPI bar */
.kpi-bar{max-width:var(--container);margin:0 auto;padding:0 var(--pad);display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.kpi{position:relative;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:12px;box-shadow:var(--shadow-sm)}
.kpi .label{display:flex;align-items:center;gap:8px;color:var(--muted)}
.kpi .label .material-symbols-rounded{font-size:18px;color:var(--muted-ink)}
.kpi .value{font-size:30px;margin-top:4px}
.kpi .delta{display:flex;gap:6px;align-items:center;margin-top:6px;color:var(--muted)}
.kpi .delta.positive{color:var(--brand-accent)}
.kpi .delta.negative{color:var(--brand-danger)}

/* Cards de indicadores */
.grid{max-width:var(--container);margin:10px auto 24px;padding:0 var(--pad);display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
.grid.align-left{margin-left:0;margin-right:auto}
.card--wide{grid-column:span 2;min-width:420px}
.card{position:relative;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:12px}
.card h3{margin:0 0 10px;display:flex;gap:8px;align-items:center;font-size:var(--h3)}
.card h3 .material-symbols-rounded{color:var(--muted-ink)}
.ph{height:220px;border:1px dashed var(--border);border-radius:var(--radius-sm);display:grid;place-items:center;color:var(--muted)}

.info-trigger{position:absolute;right:10px;top:10px;display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:999px;border:none;background:transparent;color:var(--muted);cursor:pointer;transition:color .18s ease,background .18s ease}
.info-trigger .material-symbols-rounded{font-size:18px}
.info-trigger:hover,.info-trigger:focus-visible{color:var(--brand-secondary);background:color-mix(in oklab,var(--brand-secondary) 12%,var(--surface-alt))}
.info-trigger:focus-visible{outline:none;box-shadow:var(--ring)}

/* Modais genéricos */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:clamp(16px,4vw,40px);z-index:100}
.modal:target{display:flex}
.modal .backdrop{position:fixed;inset:0;display:block;background:rgba(2,6,23,.45);z-index:0}
.sheet{position:relative;width:min(760px,96vw);max-height:min(90vh,560px);display:flex;flex-direction:column;overflow:hidden;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow-md);z-index:1}
.sheet.compact{width:min(640px,96vw);max-height:min(90vh,520px)}
.sheet-head{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--border);position:sticky;top:0;background:var(--surface);z-index:2}
.sheet-head h2{margin:0;font-size:16px}
.sheet-body{padding:14px;flex:1 1 auto;overflow-y:auto;min-height:0}
.close{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:999px;color:var(--muted)}

.modal-body-flow{display:flex;flex-direction:column;gap:10px}
.modal-body-flow .hint{color:var(--muted)}
.modal-body-flow .meta{font-size:12px;color:var(--muted)}

.filters-grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
.form-field label{display:block;margin-bottom:6px;font-weight:600;color:var(--muted-ink)}
.form-field select{width:100%;padding:10px 12px;border-radius:var(--radius-sm);border:1px solid var(--border);background:var(--surface);color:var(--text);transition:border-color .18s ease,box-shadow .18s ease}
.form-field select:focus-visible{border-color:color-mix(in oklab,var(--brand-secondary) 40%,var(--border));box-shadow:var(--ring)}
.togglebar{display:flex;flex-wrap:wrap;gap:10px;margin-top:4px}

.form-actions{display:flex;flex-wrap:wrap;gap:10px;justify-content:flex-end;margin-top:6px}
.btn.primary{background:var(--brand-secondary);border-color:color-mix(in oklab,var(--brand-secondary) 40%,var(--border));color:#fff}
.btn.primary:hover{background:color-mix(in oklab,var(--brand-secondary) 88%,#000);color:#fff}
.btn.primary:focus-visible{color:#fff}
.btn.ghost{background:transparent;border-style:dashed;color:var(--muted)}
.btn.ghost:hover{background:color-mix(in oklab,var(--brand-secondary) 6%,var(--surface-alt));color:var(--muted-ink)}
.btn.inline{padding:8px 12px}
.btn.is-disabled,.btn[aria-disabled="true"],.btn[disabled]{opacity:.55;pointer-events:none}

.studies-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:12px}
.study-item{display:flex;flex-direction:column;gap:10px;padding:14px;border:1px solid var(--border);border-radius:var(--radius);background:var(--surface);box-shadow:var(--shadow-sm)}
.study-header{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:10px}
.study-title{display:flex;align-items:center;gap:10px;font-weight:600;color:var(--muted-ink)}
.study-status{display:inline-flex;align-items:center;gap:6px;font-size:12px;color:var(--muted)}
.study-status.active{color:var(--brand-accent)}
.study-status.inactive{color:var(--muted)}
.study-meta{display:flex;flex-wrap:wrap;gap:12px;color:var(--muted)}
.study-meta .meta{display:inline-flex;align-items:center;gap:6px;font-size:12px}
.study-actions{display:flex;flex-wrap:wrap;gap:10px;justify-content:flex-end}
.studies-list .empty{padding:16px;border:1px dashed var(--border);border-radius:var(--radius-sm);color:var(--muted);text-align:center}

.tag{display:inline-flex;align-items:center;gap:4px;padding:4px 8px;border-radius:var(--radius-pill);font-size:11px;background:var(--surface-alt);border:1px solid var(--border);color:var(--muted-ink)}
.tag.primary{background:color-mix(in oklab,var(--brand-secondary) 12%,var(--surface));border-color:color-mix(in oklab,var(--brand-secondary) 32%,var(--border));color:var(--brand-secondary)}

body.modal-open{overflow:hidden}

@media (min-width:680px){
  .study-item{flex-direction:column;gap:12px}
  .study-actions{justify-content:flex-end}
}

@media (min-width:880px){
  .study-item{flex-direction:column;gap:14px}
  .study-meta{gap:18px}
}

.quickbar{display:flex;gap:10px;flex-wrap:wrap}
.chipbtn{padding:10px 12px}

/* Pills informativas */
.pill{display:inline-flex;align-items:center;gap:8px;border-radius:var(--radius-pill);padding:8px 12px;border:1px solid var(--border);background:var(--surface)}
.pill.ok{border-color:color-mix(in oklab,var(--brand-accent) 50%,var(--border));background:color-mix(in oklab,var(--brand-accent) 10%,var(--surface));color:var(--brand-accent)}
.pill.warn{border-color:color-mix(in oklab,var(--brand-warn) 50%,var(--border));background:color-mix(in oklab,var(--brand-warn) 10%,var(--surface));color:var(--brand-warn)}
.pill.info{border-color:color-mix(in oklab,var(--brand-info) 40%,var(--border));background:color-mix(in oklab,var(--brand-info) 8%,var(--surface));color:var(--brand-info)}
.pill.err{border-color:color-mix(in oklab,var(--brand-danger) 50%,var(--border));background:color-mix(in oklab,var(--brand-danger) 10%,var(--surface));color:var(--brand-danger)}

.status-bar{max-width:var(--container);margin:0 auto 8px;padding:0 var(--pad);display:flex;flex-wrap:wrap;gap:10px}
.status-pill{min-width:200px;align-items:center}
.status-pill>div{display:flex;flex-direction:column;line-height:1.2}
.status-pill .status-text{font-size:12px;color:var(--muted)}
.status-pill .material-symbols-rounded{font-size:20px}

/* Bandeiras (texto emoji alinha melhor) */
.flag{font-size:18px}

/* ===== Responsividade ===== */
@media (max-height:600px){
  .modal{align-items:flex-start;padding:clamp(12px,4vw,24px)}
  .sheet,.sheet.compact{border-radius:var(--radius-sm)}
}
@media (max-width:1200px){
  .kpi-bar{grid-template-columns:repeat(3,1fr)} /* tablet landscape ~ 3 colunas */
}
@media (max-width:900px){
  .kpi-bar{grid-template-columns:repeat(2,1fr)} /* tablet portrait ~ 2 colunas */
}
@media (max-width:560px){
  .kpi-bar{grid-template-columns:1fr}
  .title{align-items:center}
}

/* Grid dos cards: fluido com auto-fit */
@media (max-width:900px){.card--wide{grid-column:span 1;min-width:0}}

/* ===== Variantes de tema via data-theme ===== */
[data-theme="light"] .btn.active,[data-theme="light"] .chipbtn.active{border-color:var(--brand-primary);}
[data-theme="dark"] .btn.active,[data-theme="dark"] .chipbtn.active{border-color:color-mix(in oklab,var(--brand-primary) 70%, #000)}

/* ===== Utilitários ===== */
.u-hidden{display:none !important}
.u-center{display:grid;place-items:center}

/* ===== Estados e acessibilidade ===== */
:focus-visible{outline:none;box-shadow:var(--ring)}
[aria-pressed="true"]{background:color-mix(in oklab,var(--brand-primary) 6%, var(--surface));border-color:color-mix(in oklab,var(--brand-primary) 40%, var(--border))}

/* ===== Cores rápidas aplicáveis ===== */
.text-brand{color:var(--brand-primary)}
.bg-surface{background:var(--surface)}
.bd{border:1px solid var(--border)}

/* ===== Footer ===== */
footer{max-width:var(--container);margin:10px auto 48px;padding:0 var(--pad);color:var(--muted)}
