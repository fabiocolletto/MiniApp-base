<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MiniApps — Shell</title>
  <meta name="theme-color" content="#0f172a" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" href="./miniapp-base/icons/icon-192.png" />
  <link rel="apple-touch-icon" href="./miniapp-base/icons/icon-192.png" />
  <link rel="stylesheet" href="./miniapp-base/style/styles.css" />
</head>
<body>
  <div id="miniapp-root" class="ma">
    <div class="app" role="application">
      <header class="app-header" aria-live="polite">
        <div class="cluster">
          <picture>
            <source media="(prefers-color-scheme: dark)" srcset="https://5horas.com.br/wp-content/uploads/2025/10/Logo-Dark-Transparente-2000x500px.webp">
            <source media="(prefers-color-scheme: light)" srcset="https://5horas.com.br/wp-content/uploads/2025/10/Logo-Light-Transparente-2000x500px.webp">
            <img src="miniapp-base/icons/icon-192.png" alt="5 Horas" style="height:32px" loading="eager">
          </picture>
          <div>
            <h1 data-header-title>Catálogo de MiniApps</h1>
            <p data-header-subtitle class="muted">Escolha um MiniApp para abrir</p>
          </div>
        </div>
        <div class="cluster" style="margin-left:auto">
          <button id="openCatalog" class="btn btn--ghost" type="button" title="Abrir catálogo">Catálogo</button>
          <button id="themeToggle" class="btn btn--ghost" type="button" aria-pressed="false" title="Ativar tema escuro">
            <span data-theme-toggle-label>Ativar tema escuro</span>
          </button>
        </div>
      </header>
      <main>
        <section id="setup-sheet-view" class="app-view app-view--centered" hidden>
          <div class="wrap app-view__wrap">
            <div class="surface stack app-view__card" role="region" aria-labelledby="sheet-setup-title">
              <header class="stack">
                <h2 id="sheet-setup-title">Configurar planilha do catálogo</h2>
                <p class="support-text" data-tone="info">
                  Informe o ID da planilha do Google Sheets que centraliza os MiniApps. Use o trecho entre
                  <code>/d/</code> e <code>/edit</code> da URL compartilhada.
                </p>
              </header>
              <form id="sheet-config-form" class="stack" autocomplete="off">
                <label class="form-field" for="sheetIdInput">
                  <span class="form-label">ID da planilha</span>
                  <input id="sheetIdInput" name="sheetId" type="text" class="input" placeholder="1A2B3C…" required />
                </label>
                <div class="form-actions">
                  <button id="sheetConfigSubmit" class="btn btn--primary" type="submit">Salvar e carregar catálogo</button>
                </div>
                <p id="sheet-setup-status" class="support-text" role="status" aria-live="polite"></p>
              </form>
            </div>
          </div>
        </section>

        <section id="catalog-view" class="app-view" hidden>
          <iframe id="catalog-frame" class="app-panel" src="miniapp-catalogo/index.html" title="Catálogo de MiniApps" loading="eager"></iframe>
        </section>

        <section id="app-view" class="app-view" hidden>
          <iframe id="miniapp-panel" name="miniapp-panel" class="app-panel" src="about:blank" title="MiniApp selecionado" loading="lazy"></iframe>
        </section>
      </main>
      <footer class="app-footer">
        <small>5 Horas — MiniApp Base</small>
        <a class="btn btn--soft" href="#" id="installPWA" hidden>Instalar</a>
      </footer>
    </div>
  </div>
  <script type="module" src="js/app.js"></script>
</body>
</html>
